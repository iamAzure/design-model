# 策略模式 (Strategy Pattern)

## 模式说明

策略模式是一种行为型设计模式，它定义了一系列算法，并将每个算法封装起来，使它们可以相互替换，且算法的变化不会影响使用算法的客户端。

## 实现结构

- `PaymentStrategy.ts`: 支付策略接口，定义了所有支付策略共有的方法
- `AlipayStrategy.ts`: 支付宝支付策略实现
- `WechatPayStrategy.ts`: 微信支付策略实现
- `CreditCardStrategy.ts`: 信用卡支付策略实现
- `PaymentContext.ts`: 支付上下文类，维护当前使用的支付策略
- `index.ts`: 示例代码

## 运行示例

1. 确保已安装 Node.js 18 版本
2. 使用 pnpm 安装依赖：
   ```bash
   pnpm install
   ```
3. 运行示例代码：
   ```bash
   pnpm ts-node index.ts
   ```

## 示例输出

运行示例代码后，你将看到类似以下的输出：

```
=== 测试场景1：使用支付宝支付 ===
当前支付方式: 支付宝支付
使用支付宝支付 100 元
支付宝账号: alipay@example.com
支付成功！

=== 测试场景2：切换到微信支付 ===
当前支付方式: 微信支付
使用微信支付 200 元
微信账号: wxid_123456
支付成功！

=== 测试场景3：切换到信用卡支付 ===
当前支付方式: 信用卡支付
使用信用卡支付 300 元
卡号: 1234 **** **** 3456
支付成功！
```

## 模式优点

1. 算法可以自由切换
2. 避免使用多重条件判断
3. 扩展性良好，易于添加新的策略
4. 符合开闭原则

## 模式缺点

1. 策略类会增多
2. 所有策略类都需要对外暴露
3. 客户端必须知道所有的策略类，并自行决定使用哪个策略

## 适用场景

1. 系统中有多个算法，它们只是行为不同
2. 算法需要自由切换
3. 需要屏蔽算法规则的复杂性
4. 有多个if-else分支，且每个分支都是一个算法 